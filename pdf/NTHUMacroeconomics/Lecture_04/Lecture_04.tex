\documentclass[11pt,aspectratio=169,usenames,dvipsnames]{beamer}
\usetheme{SimplePlus}

\usepackage{threeparttable}
\usepackage{booktabs}
\usepackage{xcolor} % For custom colors
\usepackage{tikz} % For styling enumerate numbers
\usepackage{tcolorbox} % For colored box styling
\usepackage{amsmath, amsfonts, amssymb, amsthm} % Math related
\usepackage{natbib}
\usepackage{fontspec}
\usepackage{luatexja}
\usepackage[mathscr]{euscript}

% ---------------- %
% color definition %
% ---------------- %
\definecolor{main}{HTML}{23373B}
\definecolor{pink}{RGB}{180, 50, 110}
\definecolor{orange}{HTML}{FF8000}
\definecolor{red}{HTML}{990000}
\definecolor{blue}{HTML}{004C99}
\definecolor{lightgray}{HTML}{E7E7E7}
\definecolor{gray}{RGB}{90, 90, 90}

\newcommand{\pink}[1]{\textcolor{pink}{#1}}
\newcommand{\orange}[1]{\textcolor{orange}{#1}}
\newcommand{\red}[1]{\textcolor{red}{#1}}
\newcommand{\blue}[1]{\textcolor{blue}{#1}}
\newcommand{\green}[1]{\textcolor{OliveGreen}{#1}}
\newcommand{\magenta}[1]{\textcolor{magenta}{#1}}
\newcommand{\gray}[1]{\textcolor{gray}{#1}}
\newcommand{\purple}[1]{\textcolor{purple}{#1}}
\definecolor{yellow}{HTML}{EDB120}

% \setbeamercolor{alerted text}{fg=blue}

%%% automatically add spaces into enumerate and itemize environment
\let\tempone\itemize
\let\temptwo\enditemize
\renewenvironment{itemize}{\tempone\addtolength{\itemsep}{\fill}}{\temptwo}
\let\tempa\enumerate
\let\tempb\endenumerate
\renewenvironment{enumerate}{\tempa\addtolength{\itemsep}{\fill}}{\tempb}

\usepackage{fontawesome5}
\setbeamertemplate{itemize item}{\faAngleRight}
\setbeamertemplate{itemize subitem}{\faAngleDoubleRight}

\setmainfont{Crimson Pro Light}[
  ItalicFont={* Italic},
  BoldFont={Crimson Pro Medium},
  BoldItalicFont={Crimson Pro Medium Italic}]
\setsansfont{Crimson Pro Light}[
  ItalicFont={* Italic},
  BoldFont={Crimson Pro Medium},
  BoldItalicFont={Crimson Pro Medium Italic}]

\usepackage[mode=tex]{standalone}
\usepackage{tikz}
\usetikzlibrary{decorations}
\usetikzlibrary{decorations.pathreplacing, intersections}
\usepackage{pgfplots}
\usetikzlibrary{calc,positioning}
\usepgfplotslibrary{fillbetween}
\pgfplotsset{compat=newest, scale only axis, width = 10cm}

% --------------------------- %
% Section title page with toc %
% --------------------------- %
\setbeamertemplate{subsection page}{%
    \usebeamertemplate*{section page}
}
\setbeamertemplate{section in toc}[square]
\setbeamertemplate{subsection in toc}[square]
\AtBeginSection[]{
% \sepframe
\begin{frame}[noframenumbering]{Outline}
    % \tableofcontents[currentsection]
    \tableofcontents[currentsection, currentsubsection]
\end{frame}
}
\AtBeginSubsection[]{
  \begin{frame}[noframenumbering]{Outline}
    \tableofcontents[currentsection, currentsubsection]
  \end{frame}
}

% ------------ %
% beamerbutton %
% ------------ %
\newcommand{\goto}[2]{\hyperlink{#2}{\beamergotobutton{#1}}}
\newcommand{\return}[2]{\hyperlink{#2}{\beamerreturnbutton{#1}}}
\newcommand{\extgoto}[2]{\href{#2}{\beamergotobutton{#1}}}

\hypersetup{
    pdfpagemode=UseNone,
    pdftitle = {Macroeconomics I, Lecture 4},
    pdfauthor = {Hui-Jun Chen},
    pdfsubject = {},
    pdfkeywords = {},
}

\title[Lecture 4]{Lecture 4 \\ Representative Consumer \\ Preference and Constraints }
\author[Hui-Jun Chen]{Hui-Jun Chen}
\institute[NTHU]{National Tsing Hua University}
\date{\today}

\begin{document}

% Title Page
\begin{frame}[plain]
    \titlepage
\end{frame}

\begin{frame}{Overview: Lecture 4 - 7}
\label{slide:Overview__Lecture_4_7}

\begin{center}
Provide \alert{micro-foundation} for the \alert{macro implication} (\alert{Lucas critique})
\end{center}

\begin{itemize}
    \item \textbf{Representative Consumer}:
    \begin{itemize}
        \item Lecture 4: \alert{preference}, \alert{constraints}
        \item Lecture 5: \alert{optimization}, \alert{application}
        \item Lecture 6: Numerical Examples
    \end{itemize}
    \item \textbf{Representative Firm}:
    \begin{itemize}
        \item Lecture 7: \alert{production}, \alert{optimization}, \alert{application}
    \end{itemize}
\end{itemize}
\end{frame}

\section{Preference}
\label{sec:Preference}

\begin{frame}{Utility Function}
\label{slide:Utility_Function}
    We use utility function $ U( C, l ) $ to represent the \alert{preference/happiness}
    \begin{itemize}
        \item $ C $: consumption (assume single/composite goods)
        \item $ l $: leisure (time spent not working)
    \end{itemize}
    Utility function defines the \alert{ranking} of \alert{$(C, l)$ bundles}
    \begin{itemize}
        \item If $ U( C_{1}, l_{1} ) > U( C_{2}, l_{2} ) $, then $ ( C_{1}, l_{1} ) $ is \alert{strictly preferred} to $ ( C_{2}, l_{2} ) $
        \begin{itemize}
            \item $ \because $ $( C_{1}, l_{1} ) $ bundle generate \alert{more} happiness than $ ( C_{2}, l_{2} ) $ bundle
        \end{itemize}
        \item If $ U( C_{1}, l_{1} ) = U( C_{2}, l_{2} ) $, then \alert{indifferent} between $ ( C_{1}, l_{1} ) $ and $ ( C_{2}, l_{2} ) $
        \begin{itemize}
            \item $ \because $ $( C_{1}, l_{1} ) $ bundle generate \alert{same} happiness as $ ( C_{2}, l_{2} ) $ bundle
        \end{itemize}
        \item Note: \alert{level} of utility is meaningless, only \alert{order} matters!
    \end{itemize}
\end{frame}

\begin{frame}{Properties of Utility Function}
\label{slide:Properties_of_Utility_Function}
    \begin{enumerate}
        \item \textbf{Monotonicity}: more is always better!
        \begin{itemize}
            \item If $ C_{1} > C_{2} $ and $ l_{1} > l_{2} $, then $ U( C_{1}, l_{1} ) > U( C_{2}, l_{2} ) $
        \end{itemize}
        \item \textbf{Convexity}: prefer \alert{diversified} consumption bundles
        \begin{itemize}
            \item e.g. prefer food $ + $ leisure rather than overeating / oversleeping
        \end{itemize}
        \item \textbf{Normality}: consumption and leisure are \alert{normal} goods
        \begin{itemize}
            \item income $ \uparrow  $ $ \Rightarrow  $ consumption $ \uparrow  $
            \item leisure is complicated: relates to income
            \begin{itemize}
                \item the poor: less leisure means \alert{more} labor income
                \item the rich: more income means \alert{more} leisure
            \end{itemize}
        \end{itemize}
    \end{enumerate}
\end{frame}

\begin{frame}{Rep. of Utility Function: Indifference Curve}
\label{slide:Representation_of_Utility_Function__Indifference_Curve}
\begin{columns}
    \begin{column}{0.5\textwidth}
        \begin{itemize}
            \item \textbf{Def}: $ ( C, l ) $ bundles that yield \alert{the same} utility level
            \item \alert{Monotonicity} $ \Rightarrow  $ downward sloping
            \item \alert{Convexity} $ \Rightarrow  $ diversity shown in comparison between point $ B $ and $ D $
        \end{itemize}
    \end{column}
    \begin{column}{0.5\textwidth}
        \begin{figure}
            \caption{Figure 4.1 Indifference Curves}
            \includegraphics[width=.8\textwidth]{./figures/Figure4_1.jpg}
        \end{figure}
    \end{column}
\end{columns}
\end{frame}

\begin{frame}{Rep. of Utility Function: Indifference Curve (Cont.)}
\label{slide:Rep_of_Utility_Function__Indifference_Curve__Cont__}
\framesubtitle{\jump{slide:Note_on_Calculus}{Calculus}}
    \begin{columns}
        \begin{column}{0.5\textwidth}
            \begin{itemize}
                \item \alert{Normality}: M{\tiny arginal}R{\tiny ate of }S{\tiny ubstitution}
                \begin{itemize}
                    \item \textbf{Marginal}: for \alert{arbitrary small} change in $ x $-axis (leisure in this case)
                    \item \textbf{rate of substitution}: the amount on $ y $-axis has to be sacrificed (consumption in this case)
                \end{itemize}
                %
                \begin{equation}
                \label{eq:MRS}
                    MRS_{l, C} = \frac{D_{l} U( C, l )}{D_{C}U( C, l )}
                ,\end{equation}
                %
                where $ D_{x}U( \cdot ) $ is derivative of $ U $ w.r.t. $ x $
            \end{itemize}
        \end{column}
        \begin{column}{0.5\textwidth}
        \begin{figure}
            \caption{Figure 4.2 MRS}
            \includegraphics[width=.8\textwidth]{./figures/Figure4_2.jpg}
        \end{figure}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}{Computing MRS}
\label{slide:Computing_MRS}
    \begin{columns}
        \begin{column}{0.5\textwidth}
            \begin{itemize}
                \item little change in leisure $ dl > 0 $ $ \Rightarrow  $ change in utility $ D_{l}U( C, l ) dl $
                \item with the cost of income loss $ \Rightarrow  $ consumption has to drop by $ dC < 0 $ amount $ \Rightarrow  $ change in utility $ D_{C}U( C, l ) dC $
                \item Stay on the IC $ \Rightarrow  $ utility remain the same:
                %
                %
                \begin{align*}
                    D_{C} & U( C, l ) dC + D_{l}U( C, l ) dl = 0 \\
                   \frac{dC}{dl} & = - \frac{D_{l}U( C, l )}{D_{C} U( C, l )} = - MRS_{l, C}
                \end{align*}
                %
            \end{itemize}
        \end{column}
        \begin{column}{0.5\textwidth}
            \begin{tikzpicture}
                \pgfmathsetmacro{\x}{5};
                \pgfmathsetmacro{\y}{5};
                % \draw[very thin,color=gray, step=0.1] (0,0) grid (\x, \y); % gray grid
                \draw[->] (0,0) node[below]{ $ 0 $  } -- node[below]{leisure $l$} (\x + 0.5,0) ;   % label x axis
                \draw[->] (0,0) -- node[above, rotate=90]{consumption $C$} (0,\y + 0.5) ;   % label y axis
                \draw[thick, blue] (1, \y) to[bend right=40]
                        node[pos=0.2,draw,fill=red,circle,inner sep=1pt] (a) {}
                        node[pos=0.8,draw,fill=red,circle,inner sep=1pt] (b) {}
                        node[pos=0.5,draw,fill=red,circle,inner sep=1pt] (c) {}
                        node[pos=0.51] (d) {}
                        (\x,1);

                \path (a); \pgfgetlastxy{\xaxis}{\yaxis};
                \coordinate (a_x) at (\xaxis, 0);
                \coordinate (a_y) at (0, \yaxis);
                \draw[dashed] (a) -- (a_x);
                \draw[dashed] (a) -- (a_y);

                \path (b); \pgfgetlastxy{\xaxis}{\yaxis};
                \coordinate (b_x) at (\xaxis, 0);
                \coordinate (b_y) at (0, \yaxis);
                \draw[dashed] (b) -- (b_x);
                \draw[dashed] (b) -- (b_y);


                \draw [decorate,decoration={brace,amplitude=4pt},xshift=0pt,yshift=3pt]
                       (a_x) -- (b_x) node [black,midway,yshift=.3cm] {\footnotesize $dl$};
                \draw [decorate,decoration={brace,amplitude=4pt},xshift=3pt,yshift=0pt]
                       (a_y) -- (b_y) node [black,midway,xshift=.4cm] {\footnotesize $dC$};
                \draw[shorten >=-1cm, shorten <=-1cm, thick, red] (a) -- (b);
                \draw[shorten >=-1cm, shorten <=-1cm, thick, red] (c) -- (d);
            \end{tikzpicture}
        \end{column}
    \end{columns}
\end{frame}

\begin{frame}{Algebraic Example}
\label{slide:Algebraic_Example}
    Suppose $ U( C, l ) = \frac{C^{1-\sigma}}{1-\sigma} + \psi \ln l $, where $ \sigma $ and $ \psi $ are parameters. Then,
    \begin{itemize}
        \item $D_{C} U( C, l ) = ( 1-\sigma) \frac{C^{1-\sigma - 1}}{1-\sigma} = C^{-\sigma}$
        \item Remember $ \frac{d \ln l}{dl} = \frac{1}{l} $, $ D_{l} U( C, l ) = \frac{\psi}{l}$
        \item $ MRS_{l, C} = \frac{D_{l} U( C, l )}{D_{C}U( C, l )} = \frac{\psi}{l C^{-\sigma}} $
    \end{itemize}
\end{frame}

\section{Constraints}
\label{sec:Constraints}

\begin{frame}{Budget Constraints}
\label{slide:Budget_Constraints}
    \begin{itemize}
        \item \textbf{Time}: consumer has $ h $ hours per day, and allocate between leisure $ l $ and labor supply $ N^{s} $
        %
        \begin{equation}
        \label{eq:LaborTime}
            l + N^{s} = h
        \end{equation}
        %
        \item \textbf{Budget}: consumer cannot spend more than the income he/she has
        \begin{itemize}
            \item \alert{labor income}: wage rate $ w $ times labor supply $ N^{s} $, $ wN^{s} $
            \item \alert{dividends income}: consumer buys share of the firm, gain dividend $ \pi $
            \item \alert{tax}: consumer is subject to lump-sum taxes $ T $
        \end{itemize}
        %
        \begin{equation}
        \label{eq:budgetConstraint}
            C \le w N^{s} + \pi - T
        \end{equation}
        %
        \item Consumption is \textbf{numeraire}: price \alert{normalized} to $ 1 $.
        \begin{itemize}
            \item Imagine consumption goods as \alert{unit of account}, ppl directly trade with consumption goods
        \end{itemize}
    \end{itemize}
\end{frame}

\begin{frame}{Visualization of Budget Set}
\label{slide:Visualization_of_Budget_Set}
    \begin{columns}
        \begin{column}{0.5\textwidth}
            \begin{figure}
                \caption{Figure 4.3 Representative Consumer's Budget Constraint when $ T > \pi $ (``poor'')}
                \includegraphics[width=.9\textwidth]{./figures/Figure4_3.jpg}
            \end{figure}
        \end{column}
        \begin{column}{0.5\textwidth}
            \begin{figure}
                \caption{Figure 4.4 Representative Consumer's Budget Constraint when $ T < \pi $ (``rich'')}
                \includegraphics[width=.9\textwidth]{./figures/Figure4_4.jpg}
            \end{figure}
        \end{column}
    \end{columns}
\end{frame}


\appendix

% \begin{frame}[allowframebreaks]{References}
% \footnotesize
% \bibliographystyle{$BIB_STYLE}
% \bibliography{$BIBFILE}
% \end{frame}


\section{Calculus}
\label{sec:Calculus}



\begin{frame}{Note on Calculus}
\label{slide:Note_on_Calculus}
\framesubtitle{\jump{slide:Rep_of_Utility_Function__Indifference_Curve__Cont__}{Back}}
    \begin{itemize}
	\item Function: $y = f\left( x \right) $, how $ y $ is determined by $ x $
	    \begin{itemize}
	        \item E.g.,  $y = 3x+2$: if $x=3$, then $3$ times  $3$ and plus $2$ will get $y=11$
	    \end{itemize}
	\item Differentiation: how changes in $ x $ results in change in $y$
	    \begin{itemize}
	        \item E.g., $y = 3x+2$,
		    \begin{table}[htpb]
		        \centering
		        \caption{Table for how the value of $x$ affects the value of $y$}
		        \label{tab:Table-for-how-the-value-of-x-affects-the-value-of-y-}
		        \begin{tabular}{cccccc}
			    $x$ & $1$ &  $2$ &  $3$ & $4$ & $5$ \\
			    \hline
			    $y$ & $5$ & $8$ & $11$ & $14$ & $17$ \\
		        \end{tabular}
		    \end{table}
		    \textbf{Notice $ \Delta x = 1 \implies  \Delta y = 3  \implies  \frac{ \Delta y}{ \Delta x} = 3 $}, change to differentiation notation, $\frac{dy}{dx}  = 3$
	    \end{itemize}
	\item  \textbf{Tips}: $y = 3x^{2} + 9x  + 2 $, look at terms with $x$,  $dy = 3 \times 2 x\left( dx \right) + 9 \left( dx \right)   \implies \frac{dy}{dx} = 6x+9  $
    \end{itemize}
\end{frame}

\end{document}
